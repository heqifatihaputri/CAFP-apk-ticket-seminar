<%= render 'layouts/shared/breadcrumb' %>
<section class="section profile">
  <div class="row">
    <div class="col-xl-12">
      <div class="card">
        <div class="card-body pt-3">
          <div class="dropdown">
          <ul class="nav nav-tabs nav-tabs-bordered">
            <li class="nav-item">
              <%= link_to "Overview", admin_user_path(tab: "profile-overview"), class: "nav-link #{'active' if @tab.eql?("profile-overview")}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Address", admin_user_path(tab: "profile-address"), class: "nav-link #{'active' if @tab.eql?("profile-address")}" %>
            </li>
            <li class="nav-item">
              <%= link_to "E-wallet", admin_user_path(tab: "e-wallet"), class: "nav-link #{'active' if @tab.eql?("e-wallet")}" %>
            </li>
          </ul>
          <div class="tab-content pt-2">
            <% if @tab.eql?("profile-overview") %>
              <div class="tab-pane fade show active profile-overview" id="profile-overview">
                <div align="right">
                  <%= link_to edit_admin_user_path(@user), class: 'btn btn-info me-2' do %>
                    <i class='zmdi zmdi-edit'></i>
                    Edit
                  <% end %>
                </div>
                <h5 class="card-title">Profile Details</h5>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">User UID</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.user_uid %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Email</div>
                  <div class="col-lg-9 col-md-8"><%= @user.email %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Full Name</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.full_name %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">NRIC</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.nric %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Date of Birthday</div>
                  <div class="col-lg-9 col-md-8"><%= date_formater(@profile.dob) %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Gender</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.gender&.capitalize %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Marital Status</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.marital_status %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Company / Community</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.company %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Job</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.job %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Mobile Phone</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.mobile_phone %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Home Number</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.home_number %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Facebook</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.facebook %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Instagram</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.instagram %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Linkedin</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.linkedin %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Registered At</div>
                  <div class="col-lg-9 col-md-8"><%= date_formater(@user.created_at) %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Default Password</div>
                  <div class="col-lg-9 col-md-8"><%= @user.default_password %></div>
                </div>
              </div>
            <% end %>
            <% if @tab.eql?("profile-address") %>
              <div class="tab-pane fade show active profile-overview" id="profile-address">
                <h5 class="card-title">Address</h5>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Full Address</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.address %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Country</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.country&.country_name %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Nationality</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.country&.nationality_name %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">City</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.city %></div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Post Code</div>
                  <div class="col-lg-9 col-md-8"><%= @profile.postcode %></div>
                </div>
              </div>
            <% end %>
            <% if @tab.eql?("e-wallet") %>
              <div class="tab-pane fade show active profile-overview" id="e-wallet">
                <h5 class="card-title">E-Wallet</h5>
                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Current Amount</div>
                  <div class="col-lg-9 col-md-8"><%= number_to_currency(@balance.current_mutation, unit: 'Rp ') %></div>
                  <div class="mt-4">
                    <%#= link_to top_up_wallet_admin_balance_path(@balance),
                        data: { turbo_frame: "remote_modal" }, class: 'btn btn-primary' do %>
                      <!-- Top Up -->
                    <%# end %>
                    <h5 class="card-title">Top Up E-Wallet</h5>
                    <%= form_tag create_balance_in_admin_balance_path(@balance), method: :post do %>
                      <%= hidden_field_tag :id, @balance.id %>
                      <div class="col-lg-5">
                        <div class="row mb-3">
                          <%= label_tag :amount, 'Amount<span class="text-danger">*</span>'.html_safe, class: "col-sm-2 col-form-label" %>
                          <div class="col-sm-10">
                            <%= number_field_tag :amount, nil, class: 'form-control', min: 5000, required: true, id: "top-up-amount" %>
                          </div>
                        </div>
                      </div>
                      <div class="actions-btn">
                        <%= submit_tag "Top Up", class: 'btn btn-success', id: "btn-submit-top-up",
                            data: { confirm: "" } %>
                      </div>
                    <% end %>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
          <div class="card-footer" align="left">
            <%= link_to "Back", admin_users_path, class: "btn btn-outline-primary me-2" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div id='top-up-modals'></div>
